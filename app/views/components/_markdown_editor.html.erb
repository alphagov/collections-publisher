<%
  textarea ||= {}
  component_classes = %w[app-c-markdown-editor govuk-form-group]
  controls ||= []
%>
<%= tag.div class: component_classes do %>

  <%= render "govuk_publishing_components/components/label", {
    html_for: textarea[:id],
  }.merge(label.symbolize_keys) %>

   <div class="app-c-markdown-editor__container">
    <div class="app-c-markdown-editor__head">
      <div class="app-c-markdown-editor__toolbar">
        <markdown-toolbar class="app-c-markdown-editor__toolbar-group" for="<%= textarea[:id] %>">
          <% if controls.include?(:headings) %>
            <md-header-2 class="app-c-markdown-editor__toolbar-button" title="Heading level 2" aria-label="Heading level 2" data-gtm="markdown-toolbar-h2" data-gtm-click-tracking="true">
              <%= render "components/markdown_editor/heading_two.svg" %>
            </md-header-2>
            <md-header-3 class="app-c-markdown-editor__toolbar-button" title="Heading level 3" aria-label="Heading level 3" data-gtm="markdown-toolbar-h3" data-gtm-click-tracking="true">
              <%= render "components/markdown_editor/heading_three.svg" %>
            </md-header-3>
          <% end %>
          <md-link class="app-c-markdown-editor__toolbar-button" title="Link" aria-label="Link">
            <%= render "components/markdown_editor/link.svg" %>
          </md-link>
          <% if controls.include?(:bullets) %>
            <md-unordered-list class="app-c-markdown-editor__toolbar-button" title="Bullets" aria-label="Bullets">
              <%= render "components/markdown_editor/bullets.svg" %>
            </md-unordered-list>
          <% end %>
        </markdown-toolbar>
      </div>
    </div>

    <div class="app-c-markdown-editor__input">
      <%= render "govuk_publishing_components/components/textarea", textarea %>
    </div>
  </div>
<% end %>

<%
  links = [
    {
      text: 'Step by step publisher',
      href: step_by_step_pages_path
    },
    {
      text: @step_page.title,
      href: step_by_step_page_path(@step_page)
    },
    {
      text: 'Choose navigation',
    }
  ]
%>

<%= render 'shared/steps/step_breadcrumb', links: links %>

<%= render 'shared/steps/form_notice', message: notice, status: "success" %>

<%= render 'shared/steps/page_title', links: links %>

<%= render 'shared/steps/heading',
  step_nav: @step_page.title,
  action: 'Choose on-page side navigation'
%>

<%= form_for(step_by_step_page_navigation_rules_path(@step_page), method: :put) do |form| %>

  <table class="table table-striped table-stepnav-rules">
    <thead>
      <tr>
        <th>Page title</th>
        <th>Sidebar content of page</th>
      </tr>
    </thead>

    <tbody>
      <% @step_page.navigation_rules.each do |navigation_rule| %>
        <tr>
          <th><%= link_to(navigation_rule.title, navigation_rule.base_path) %></th>
          <td>
            <div class="checkbox">
              <label>
                <%= hidden_field_tag("navigation_rules[#{navigation_rule.content_id}]", false)%>
                <%= check_box_tag( "navigation_rules[#{navigation_rule.content_id}]", true, navigation_rule.include_in_links) %>
                Show this navigation<span class="sr-only"> on '<%= navigation_rule.title %>'</span>
              </label>
            </div>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <div class="form-group">
    <%= form.submit "Save", class: "btn btn-primary" %>
  </div>
  <div class="form-group">
    <%= link_to "Cancel", @step_page %>
  </div>
<% end %>
